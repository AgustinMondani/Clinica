<div class="container mt-4">
  <h2>Mis Horarios</h2>

  <form class="row g-3 mb-4" (ngSubmit)="agregarHorario()">

    <div class="col-md-3">
      <label class="form-label">Especialidad</label>
      <select class="form-select" [(ngModel)]="nueva.especialidad" name="especialidad" required>
        <option *ngFor="let esp of especialidades" [value]="esp">{{ esp }}</option>
      </select>
    </div>


    <div class="col-md-4">
      <label class="form-label">Días</label>
      <div *ngFor="let dia of diasSemana" class="form-check">
        <input class="form-check-input" type="checkbox" [value]="dia" (change)="toggleDiaSeleccionado($event)"
          [checked]="nueva.dias.includes(dia)" id="dia-{{ dia }}" />
        <label class="form-check-label" for="dia-{{ dia }}">{{ dia }}</label>
      </div>
    </div>

    <div class="col-md-2">
      <label class="form-label">Desde</label>
      <select class="form-select" [(ngModel)]="nueva.hora_desde" name="desde" required>
        <option *ngFor="let hora of horasDisponibles" [value]="hora">{{ hora }}</option>
      </select>
    </div>


    <div class="col-md-2">
      <label class="form-label">Hasta</label>
      <select class="form-select" [(ngModel)]="nueva.hora_hasta" name="hasta" required>
        <option *ngFor="let hora of horasDisponibles" [value]="hora">{{ hora }}</option>
      </select>
    </div>

    <div class="col-md-2">
      <label class="form-label">Duración del turno</label>
      <select class="form-select" [(ngModel)]="nueva.duracion" name="duracion" required (change)="onDuracionChange()">
        <option value="" disabled selected>Seleccionar</option>
        <option *ngFor="let dur of duracionesTurno" [value]="dur">{{ dur }} min</option>
      </select>

    </div>


    <div class="col-md-2 d-flex align-items-end">
      <button class="btn btn-primary w-100" type="submit">Agregar</button>
    </div>
  </form>


  <div *ngIf="mensajeError" class="alert alert-danger text-center mt-2">
    {{ mensajeError }}
  </div>


  <div *ngIf="horarios.length === 0" class="text-muted">No hay horarios cargados.</div>

  <ul class="list-group">
    <li *ngFor="let h of horarios" class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <strong>{{ h.especialidad }}</strong> — {{ h.dia }} de {{ h.desde }} a
        {{ h.hasta }} ({{ h.duracion }} min)
      </div>
      <button class="btn btn-danger btn-sm" (click)="eliminarHorario(h.id)">
        Eliminar
      </button>
    </li>
  </ul>
</div>